{{extend 'layout.html'}}

<script type="text/javascript">

var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { preload: preload, create: create, passDrop: passDrop, render: render });


function preload()
{
    game.load.image('bg', '{{=URL('static','images/skies/deepblue.png')}}');
    game.load.bitmapFont('nokia16black', '{{=URL('static','images/fonts/bitmapFonts/nokia16black.png')}}','{{=URL('static','images/fonts/bitmapFonts/nokia16black.xml')}}');
}

var bmpText0;
var bmpText1;
var bmpText2;
var bmpTextDrop;
var text2;

function create()
{

    //Add baground
    game.add.image(0, 0, 'bg');

    //Add a bar at the top
    var bar = game.add.graphics();
    bar.beginFill(0x000000, 0.2);
    bar.drawRect(0, 0, 800, 100);
    var style = {font: "bold 32px Arial", fill: "#ffffff", boundsAlignH: "center",
    boundsAlignV: "middle"};
    text = game.add.text(0,0, "This shit will fuck you up!", style);//The text is positioned at 0, 0 aka the top
    text.setShadow(3, 3, 'rgba(0,0,0,0.5)', 2);
    text.setTextBounds(0, 0, 800, 100);//set the bounds to be from x0, y0 and be 800px wide by 100px high

    //Text info about the game
    var text = "Testa lösenorden 1-3 i lösenordstestaren genom att,\n kopiera in dem med ctrl+c,\n Klicka på testa därefter,\n Du får testa så många gånger du vill, men minst en gång, \n innan du får välja mellan lösenorden.";
    var style = { font: "19px Arial", fill: "#ffffff", align: "left"};
    var t = game.add.text(game.world.centerX-350,122, text, style);

    //Randomgenerator of passwords,using phaser.js built in method for Math.random
    var passArray0 = [
        'Bajs123',
        'qwerty!',
        'LETMEINFFS',
        'p4s5w0rd!',
        '#¤horsie!'];
    var passArray1 = [
        '123qwerty',
        'Dvo0rak',
        'rJHK?ka',
        '20kEE$rAnd!',
        'p3n1s'];
    var passArray2 = [
        '!Panda',
        '?qwerty!',
        '!L3TMEINFFS09',
        'päs55w0rd!',
        'Nu;aäbh'];
    var randPass0 = this.game.rnd.pick(passArray0);
    var randPass1 = this.game.rnd.pick(passArray1);
    var randPass2 = this.game.rnd.pick(passArray2);
    //End of randomgenerator of passwords

    //Drag&drop passwords, need to put'em in a group, use less code

    bmpText0 = game.add.bitmapText(532, 280, 'nokia16black', randPass0, 22);
    bmpText1 = game.add.bitmapText(532, 302, 'nokia16black', randPass1, 22);
    bmpText2 = game.add.bitmapText(532, 325, 'nokia16black', randPass2, 22);

    bmpText0.inputEnabled = true;
    bmpText1.inputEnabled = true;
    bmpText2.inputEnabled = true;

    bmpText0.input.enableDrag();
    bmpText1.input.enableDrag();
    bmpText2.input.enableDrag();

    bmpTextDrop = game.add.bitmapText(532, 400, 'nokia16black', 'Drop Here!', 22);
    bmpTextDrop.inputEnabled = true;
    bmpTextDrop.input.enableDrag();

    text2 = game.add.text(16, 16, 'Drag the sprites. Overlapping: false', { fill: '#ffffff' });


}

function passDrop()
{
if (checkOverlap(bmpText0, bmpTextDrop))
    {
        text.text2 = 'Drag the sprites. Overlapping: true';
    }
    else
    {
        text.text2 = 'Drag the sprites. Overlapping: false';
    }
}

function checkOverlap(spriteA, spriteB) {

    var boundsA = spriteA.getBounds();
    var boundsB = spriteB.getBounds();

    return Phaser.Rectangle.intersects(boundsA, boundsB);

}

function render() {

}

</script>
